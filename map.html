<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Мой дом - история (Карта)</title>
  <link rel="icon" type="image/x-icon" href="img/belarusflag_6588.ico">

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f7fa;
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      background-color: #0b3d91;
      color: white;
      text-align: center;
      padding: 1.5rem 1rem;
    }

    header img {
      height: 70px;
      margin-bottom: 0.8rem;
      border-radius: 8px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
    }

    h1 {
      margin: 0;
      font-size: 1.8rem;
    }

    main {
      flex: 1;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .map-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 1rem auto;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .map-image {
      width: 100%;
      display: block;
    }

    .marker {
      position: absolute;
      width: 24px;
      height: 24px;
      background-color: #e74c3c;
      border: 2px solid white;
      border-radius: 50%;
      cursor: pointer;
      transform: translate(-50%, -50%);
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      transition: transform 0.2s;
    }

    .marker:hover {
      transform: translate(-50%, -50%) scale(1.3);
      z-index: 10;
    }
    
    .back-button {
      background-color: #0a2e70;
      color: white;
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-weight: 600;
      white-space: nowrap;
      transition: background-color 0.2s;
      align-self: flex-start;
    }
    .back-button:hover {
      background-color: #082355;
    }

    footer {
      text-align: center;
      padding: 1.2rem;
      background-color: #eef2f7;
      color: #666;
      border-top: 1px solid #ddd;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.5rem;
      }

      .marker {
        width: 20px;
        height: 20px;
      }
    }
  </style>
</head>
<body>
  <a href="index.html" class="back-button">Главная</a>
<header>
  <img src="img/Baranovichi_Coat_of_Arms_of_Baranavičy.svg.png" alt="Горисполком Барановичей">
  <h1>Исторические места Барановичей</h1>
  <p>Кликните по значку на карте</p>
</header>

<main>
  <div class="map-container" id="mapContainer">
    <!-- Статическая карта из OpenStreetMap -->
    <img 
      id="mapImage" 
      class="map-image" 
      src="https://www.openstreetmap.org/staticmap?center=53.1325,25.9992&zoom=14&size=800x500&markers=53.1325,25.9992"
      alt="Карта Барановичей"
    >
    <!-- Маркеры будут добавлены сюда скриптом -->
  </div>
</main>

<footer>
  <p>© "Мой дом - история", 2025. Все права защищены.</p>
</footer>

<script>
  // Данные объектов: [название (необяз.), широта, долгота, URL]
  const places = [
    ["Ж/д вокзал", 53.1318, 26.0030, "https://example.com/vokzal"],
    ["Парк", 53.1350, 25.9970, "https://example.com/park"],
    ["Храм", 53.1290, 26.0050, "https://example.com/hram"]
  ];

  // Параметры карты
  const centerLat = 53.1325;
  const centerLng = 25.9992;
  const zoom = 14;
  const mapWidth = 800;
  const mapHeight = 500;

  // Преобразуем координаты в пиксели относительно центра
  function latLngToPixel(lat, lng) {
    const earthCircumference = 40075016.686; // в метрах на экваторе
    const metersPerPixel = earthCircumference * Math.cos(centerLat * Math.PI / 180) / Math.pow(2, zoom + 8);
    
    const dx = (lng - centerLng) * (earthCircumference * Math.cos(centerLat * Math.PI / 180) / 360);
    const dy = (lat - centerLat) * (earthCircumference / 360);

    const px = mapWidth / 2 + dx / metersPerPixel;
    const py = mapHeight / 2 - dy / metersPerPixel; // y инвертирован

    return { x: px, y: py };
  }

  // Создаём маркеры
  const container = document.getElementById('mapContainer');
  places.forEach(place => {
    const [name, lat, lng, url] = place;
    const pos = latLngToPixel(lat, lng);

    const marker = document.createElement('div');
    marker.className = 'marker';
    marker.title = name;
    marker.style.left = pos.x + 'px';
    marker.style.top = pos.y + 'px';
    marker.addEventListener('click', () => {
      window.open(url, '_blank');
    });

    container.appendChild(marker);
  });
</script>

</body>
</html>
